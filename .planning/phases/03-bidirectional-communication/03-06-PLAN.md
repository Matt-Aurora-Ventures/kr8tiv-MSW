---
phase: 03-bidirectional-communication
plan: 06
type: execute
wave: 3
depends_on: ["03-04", "03-05"]
files_modified:
  - src/bidirectional/index.ts
  - src/knowledge/index.ts
autonomous: true

must_haves:
  truths:
    - "All bidirectional modules re-exported from src/bidirectional/index.ts"
    - "All knowledge modules re-exported from src/knowledge/index.ts"
    - "Full project builds clean with npx tsc"
  artifacts:
    - path: "src/bidirectional/index.ts"
      provides: "Barrel export for bidirectional module"
      exports: ["QueryInjector", "QueryDeduplicator", "ErrorBridge", "ResponseParser", "AnswerChain", "ContextInjector", "formatErrorQuery", "formatForAgent", "parseCitations"]
    - path: "src/knowledge/index.ts"
      provides: "Barrel export for knowledge module"
      exports: ["ReportCompiler", "GitManager", "MetadataTracker", "TraceabilityLinker"]
  key_links:
    - from: "src/bidirectional/index.ts"
      to: "all bidirectional modules"
      via: "re-exports"
      pattern: "export.*from"
    - from: "src/knowledge/index.ts"
      to: "all knowledge modules"
      via: "re-exports"
      pattern: "export.*from"
---

<objective>
Create barrel exports for both new modules and verify the full project builds. This is the integration gate before Phase 4.

Purpose: Clean public API surface for Phase 4 MCP server to import from. Build verification catches any cross-module wiring issues.
Output: Importable barrel exports and clean build.
</objective>

<execution_context>
@C:\Users\lucid\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\lucid\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-bidirectional-communication/03-04-SUMMARY.md
@.planning/phases/03-bidirectional-communication/03-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create barrel exports and verify build</name>
  <files>src/bidirectional/index.ts, src/knowledge/index.ts</files>
  <action>
**src/bidirectional/index.ts:**
```typescript
export { QueryInjector } from './query-injector.js';
export { QueryDeduplicator } from './deduplication.js';
export { ErrorBridge } from './error-bridge.js';
export { formatErrorQuery, truncateToLimit } from './error-templates.js';
export { ResponseParser, parseCitations } from './response-parser.js';
export { AnswerChain } from './answer-chain.js';
export { ContextInjector, formatForAgent } from './context-injector.js';
```

**src/knowledge/index.ts:**
```typescript
export { ReportCompiler, compileReport } from './report-compiler.js';
export { GitManager } from './git-manager.js';
export { MetadataTracker } from './metadata.js';
export { TraceabilityLinker } from './traceability.js';
```

After creating both files, run `npx tsc --noEmit` on the full project to verify everything compiles. Fix any type errors that surface from cross-module imports.

Also verify that `src/types/bidirectional.ts` is importable from both barrel files' consumers.
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>Full project builds clean; all Phase 3 modules importable via barrel exports</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` exits 0
- `src/bidirectional/index.ts` exports all 7 bidirectional modules
- `src/knowledge/index.ts` exports all 4 knowledge modules
</verification>

<success_criteria>
- Clean build with zero type errors
- All Phase 3 public API accessible via two barrel imports
- Ready for Phase 4 MCP server integration
</success_criteria>

<output>
After completion, create `.planning/phases/03-bidirectional-communication/03-06-SUMMARY.md`
</output>
